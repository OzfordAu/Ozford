{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block script_top %}
{% image page.banner_image width-320 format-avif as mobile_avif %}
{% image page.banner_image width-800 format-avif as desktop_avif %}
<link rel="preload" as="image" href="{{ mobile_avif.url }}" type="image/avif" fetchpriority="high" media="(max-width: 1024px)">
<link rel="preload" as="image" href="{{ desktop_avif.url }}" type="image/avif" fetchpriority="high" media="(min-width: 1024px)">
{% endblock script_top %}

{% block content %}
<section class="bg-primary-darker w-full relative z-0 lg:h-[450px]" aria-label="Course Banner">
  <!-- Mobile Banner Image -->
  <picture class="pointer-events-none">
    {% image page.banner_image width-320 format-webp as mobile_webp %}
    {% image page.banner_image width-320 format-jpeg as mobile_jpeg %}
    
    <source type="image/avif" srcset="{{ mobile_avif.url }}">
    <source type="image/webp" srcset="{{ mobile_webp.url }}">
    <img 
      src="{{ mobile_jpeg.url }}"
      class="lg:hidden absolute inset-0 w-full h-full object-cover object-center"
      alt="{{page.course_title}} banner image"
      width="{{ mobile_jpeg.width }}"
      height="{{ mobile_jpeg.height }}"
      fetchpriority="high"
      priority
      loading="eager">
  </picture>
  
  <div class="container mx-auto py-4 lg:py-6 xl:py-8 relative z-0">
    <div class="w-full flex items-center lg:gap-10">
      <div class="w-full lg:w-6/12 z-20">
        <div class="relative">
          <div class="absolute inset-0 bg-black/80 backdrop-blur-sm xl:hidden pointer-events-none"></div>
          <div class="relative z-10 p-4 lg:p-8 xl:p-0 xl:py-8">
            <div class="text-white mb-4 font-light tracking-wide" aria-label="CRICOS Code">
                CRICOS Code: <span class="font-medium">{{page.cricos_code}}</span>
            </div>
            
            <h1 class="text-3xl xl:text-5xl text-white font-medium">{{page.course_title}}</h1> 
            <div class="text-white font-light mt-4">{{page.course_header_description|richtext }}</div>
            
            <div class="flex flex-col md:flex-row gap-4 text-white mt-4 lg:mt-6 xl:mt-8">
                <a href="https://ozford.meshedhe.com.au/" class="group bg-primary hover:bg-primary-dark text-white px-4 py-2.5 tracking-wide inline-flex items-center gap-2 transition-colors">
                  <span>Apply</span>
                </a>
                
                <a href="/" class="group bg-primary hover:bg-primary-dark text-white px-4 py-2.5 tracking-wide inline-flex items-center gap-2 transition-colors">
                  <span>Enquire</span>
                </a>
                
                {% if page.course_brochure %}
                <a href="{{page.course_brochure.url}}" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="group bg-primary hover:bg-primary-dark text-white px-4 py-2.5 tracking-wide inline-flex items-center gap-2 transition-colors">
                  <span>Course Brochure</span>
                </a>
                {% endif %}
            </div>
          </div>
        </div>
      </div>
      
      <!-- Desktop Banner Image -->
      <div class="hidden lg:block lg:w-6/12">
        <div class="absolute top-0 right-0 z-0 pointer-events-none">
          <picture>
            {% image page.banner_image width-800 format-webp as desktop_webp %}
            {% image page.banner_image width-800 format-jpeg as desktop_jpeg %}
            
            <source type="image/avif" srcset="{{ desktop_avif.url }}">
            <source type="image/webp" srcset="{{ desktop_webp.url }}">
            <img 
              src="{{ desktop_jpeg.url }}"
              class="inline-block w-full h-[450px] object-contain"
              alt="{{page.course_title}} banner image"
              width="{{ desktop_jpeg.width }}"
              height="{{ desktop_jpeg.height }}"
              fetchpriority="high"
              loading="eager">
          </picture>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock content %}
