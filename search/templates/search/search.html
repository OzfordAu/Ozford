{% extends "base.html" %}
{% load static wagtailcore_tags %}

{% block content %}
<div class="container mx-auto px-4 py-10">
    <h1 class="text-3xl font-bold mb-6">Search Results</h1>

    <form action="{% url 'search' %}" method="get" class="mb-8">
        <div class="max-w-xl flex">
            <input 
                type="text" 
                name="query" 
                value="{{ search_query }}"
                class="block p-4 w-full rounded-full rounded-r-none border border-link-primary" 
                placeholder="Search Courses" 
            />
            <button 
                type="submit"
                class="rounded-full rounded-l-none -ml-2 border border-l-0 border-link-primary px-6 bg-link-primary text-white hover:bg-link-primary-hover hover:border-link-primary-hover transition-all"
            >
                Search
            </button>
        </div>
    </form>

    {% if search_results %}
        <div class="space-y-6">
            {% for result in search_results %}
                <div class="border-b mb-2 pb-4">
                    <h2 class="text-xl font-semibold">
                        <a href="{% pageurl result %}" class="text-link-primary hover:text-link-primary-hover">
                            {{ result.course_title }}
                        </a>
                    </h2>
                    {% if result.course_header_description %}
                        <div class="mt-2 text-gray-600">
                            {{ result.course_header_description|richtext }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        {% if search_results.has_other_pages %}
            <div class="mt-8 flex justify-center gap-4">
                {% if search_results.has_previous %}
                    <a href="{% url 'search' %}?query={{ search_query|urlencode }}&page={{ search_results.previous_page_number }}" 
                       class="text-link-primary hover:text-link-primary-hover">
                        Previous
                    </a>
                {% endif %}

                {% if search_results.has_next %}
                    <a href="{% url 'search' %}?query={{ search_query|urlencode }}&page={{ search_results.next_page_number }}"
                       class="text-link-primary hover:text-link-primary-hover">
                        Next
                    </a>
                {% endif %}
            </div>
        {% endif %}
    {% elif search_query %}
        <p class="text-gray-600">No results found for "{{ search_query }}"</p>
    {% endif %}
</div>
{% endblock %}
